{
  "version": 3,
  "sources": ["../../src/main/index.js"],
  "sourcesContent": ["import { app, BrowserWindow, Menu, dialog, ipcMain, shell } from 'electron'\nimport fs from 'fs/promises'\nimport path from 'path'\n\nlet mainWindow\nconst isDev = !app.isPackaged\n\nconst getRendererUrl = () => {\n  if (isDev && process.env.VITE_DEV_SERVER_URL) {\n    return process.env.VITE_DEV_SERVER_URL\n  }\n\n  return `file://${path.join(__dirname, '../renderer/index.html')}`\n}\n\nfunction createWindow() {\n  /**\n   * Initial window options\n   */\n\n  mainWindow = new BrowserWindow({\n    height: 560,\n    width: 900,\n    minWidth: 900,\n    minHeight: 600,\n    useContentSize: true,\n    frame: false,\n    webPreferences: {\n      contextIsolation: true,\n      nodeIntegration: false,\n      preload: path.join(__dirname, 'preload.js')\n    }\n  })\n\n  mainWindow.loadURL(getRendererUrl())\n\n  if (isDev) {\n    mainWindow.webContents.openDevTools({ mode: 'detach' })\n  }\n\n  mainWindow.on('closed', () => {\n    mainWindow = null\n  })\n\n  createMenu()\n}\n\napp.on('ready', createWindow)\n\napp.on('window-all-closed', () => {\n  if (process.platform !== 'darwin') {\n    app.quit()\n  }\n})\n\napp.on('activate', () => {\n  if (mainWindow === null) {\n    createWindow()\n  }\n})\n\nfunction createMenu() {\n  const template = [\n    {\n      label: 'Application',\n      submenu: [\n        { label: 'About Passwall', selector: 'orderFrontStandardAboutPanel:' },\n        {\n          label: 'Always On Top',\n          click: function () {\n            mainWindow.setAlwaysOnTop(!mainWindow.isAlwaysOnTop())\n          }\n        },\n        { type: 'separator' },\n        {\n          label: 'Quit',\n          accelerator: 'Command+Q',\n          click: function () {\n            app.quit()\n          }\n        }\n      ]\n    },\n    {\n      label: 'Edit',\n      submenu: [\n        { label: 'Undo', accelerator: 'CmdOrCtrl+Z', selector: 'undo:' },\n        { label: 'Redo', accelerator: 'Shift+CmdOrCtrl+Z', selector: 'redo:' },\n        { type: 'separator' },\n        { label: 'Cut', accelerator: 'CmdOrCtrl+X', selector: 'cut:' },\n        { label: 'Copy', accelerator: 'CmdOrCtrl+C', selector: 'copy:' },\n        { label: 'Paste', accelerator: 'CmdOrCtrl+V', selector: 'paste:' },\n        { label: 'Select All', accelerator: 'CmdOrCtrl+A', selector: 'selectAll:' }\n      ]\n    },\n    {\n      label: 'File',\n      submenu: [\n        {\n          label: 'Export',\n          accelerator: 'CmdOrCtrl+E',\n          click: function () {\n            mainWindow.webContents.send('menu:export')\n          }\n        },\n        {\n          label: 'Import',\n          accelerator: 'CmdOrCtrl+I',\n          click: function () {\n            mainWindow.webContents.send('menu:import')\n          }\n        }\n      ]\n    }\n  ]\n\n  Menu.setApplicationMenu(Menu.buildFromTemplate(template))\n}\n\nipcMain.handle('app:quit', () => {\n  app.quit()\n})\n\nipcMain.handle('app:getVersion', () => {\n  return app.getVersion()\n})\n\nipcMain.handle('window:minimize', () => {\n  if (mainWindow) {\n    mainWindow.minimize()\n  }\n})\n\nipcMain.handle('window:toggleMaximize', () => {\n  if (!mainWindow) {\n    return false\n  }\n\n  if (mainWindow.isMaximized()) {\n    mainWindow.unmaximize()\n    return false\n  }\n\n  mainWindow.maximize()\n  return true\n})\n\nipcMain.handle('window:toggleAlwaysOnTop', () => {\n  if (!mainWindow) {\n    return false\n  }\n\n  const nextValue = !mainWindow.isAlwaysOnTop()\n  mainWindow.setAlwaysOnTop(nextValue)\n  return nextValue\n})\n\nipcMain.handle('shell:openExternal', (_event, url) => {\n  return shell.openExternal(url)\n})\n\nipcMain.handle('dialog:selectExportDirectory', async () => {\n  if (!mainWindow) {\n    return null\n  }\n\n  const result = await dialog.showOpenDialog(mainWindow, {\n    title: 'Select Export Directory',\n    properties: ['openDirectory', 'createDirectory']\n  })\n\n  if (result.canceled) {\n    return null\n  }\n\n  return result.filePaths[0] || null\n})\n\nipcMain.handle('dialog:selectImportFile', async () => {\n  if (!mainWindow) {\n    return null\n  }\n\n  const result = await dialog.showOpenDialog(mainWindow, {\n    title: 'Select Import File',\n    properties: ['openFile']\n  })\n\n  if (result.canceled) {\n    return null\n  }\n\n  return result.filePaths[0] || null\n})\n\nipcMain.handle('fs:readFile', async (_event, filePath) => {\n  return fs.readFile(filePath, 'utf8')\n})\n\nipcMain.handle('fs:writeFiles', async (_event, dirPath, files) => {\n  await Promise.all(files.map((file) => fs.writeFile(path.join(dirPath, file.name), file.content)))\n})\n\n/**\n * Auto Updater\n *\n * Uncomment the following code below and install `electron-updater` to\n * support auto updating. Code Signing with a valid certificate is required.\n * https://simulatedgreg.gitbooks.io/electron-vue/content/en/using-electron-builder.html#auto-updating\n */\n\n/*\nimport { autoUpdater } from 'electron-updater'\n\nautoUpdater.on('update-downloaded', () => {\n  autoUpdater.quitAndInstall()\n})\n\napp.on('ready', () => {\n  if (process.env.NODE_ENV === 'production') autoUpdater.checkForUpdates()\n})\n */\n"],
  "mappings": "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",
  "names": ["path", "fs"]
}
